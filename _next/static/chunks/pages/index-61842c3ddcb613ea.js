(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(841)}])},841:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return we}});var r=t(5893),i=t(7294),o=t(326),a=t(1737),u=t(2293),c=t(7357),s=t(6720),l=t(1519),f=t(7533),d=t(3946),p=t(6798),h=t(155),m=t(1163),x=t(4051),v=t.n(x);function g(e,n,t,r,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function y(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){g(o,r,i,a,u,"next",e)}function u(e){g(o,r,i,a,u,"throw",e)}a(void 0)}))}}function b(e,n){return null!=n&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function j(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("miniflux_server"),i=localStorage.getItem("miniflux_api_key");if(!r||!i)return n("Server settings not configured."),new Promise((function(e,n){return null}));var o={headers:{"X-Auth-Token":i}};t&&(o.method="PUT",o.body=JSON.stringify(t));var a=r+"/v1/"+e,u=function(e){return n(e+" ("+a+")")};return fetch(a,o).then((function(e){if(!e.ok)throw e;return 204===e.status?e:e.json()})).catch((function(e){if(b(e,TypeError))u(e.message);else if(b(e,Response)){var n=e.headers.get("content-type");n&&-1!==n.indexOf("application/json")?e.json().then((function(e){return u(e.error_message)})):e.text().then((function(e){return u(e)}))}else u(String(e));return Promise.reject()}))}function w(){return(w=y(v().mark((function e(n,t,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=3;break}return e.next=3,j("entries",r,{entry_ids:n.map((function(e){return e.id})),status:t||void 0===t?"read":"unread"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var n=document.createElement("canvas");n.width=16,n.height=16;var t=n.getContext("2d"),r=function(e){for(var n=0,t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return n}(e)%360;return t.beginPath(),t.rect(0,0,16,16),t.fillStyle="hsl("+r+", 50%, 25%)",t.fill(),t.fillStyle="hsl("+(360-r)+", 100%, 75%)",t.font="bold 14px sans-serif",t.textBaseline="middle",t.textAlign="center",t.fillText(e[0],n.width/2,n.height/2+1),n.toDataURL()}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function k(e,n,t,r,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){k(o,r,i,a,u,"next",e)}function u(e){k(o,r,i,a,u,"throw",e)}a(void 0)}))}}function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){E(e,n,t[n])}))}return e}function O(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=t(7906),A=t(295),C=t(1535),M=t(5503),N=t(813),T=t(7888),R=t(3252),F=t(3816),L=t(7650),B=t(9218);function D(){var e,n,t=(e=["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return D=function(){return t},t}var z,U=(0,t(917).F4)(D());function V(){return(0,r.jsx)(c.Z,{sx:{width:"50px",height:"50px",border:"10px solid #f3f3f3;",borderTop:"10px solid #383636;",borderRadius:"50%",animation:"".concat(U," 1.5s linear infinite;")}})}function W(e,n,t,r,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function G(e){var n=e.inView,t=e.item,o=(0,i.useState)(t.content),a=o[0],u=o[1],c=(0,i.useState)(!1),s=c[0],l=c[1],f=(0,i.useState)(!1),d=f[0],p=f[1];return(0,i.useEffect)((function(){var e;!n||s||d||(p(!0),(e=v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("entries/".concat(t.id,"/fetch-content"),(function(){}));case 2:(n=e.sent).content.length>a.length&&u(n.content),l(!0);case 5:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){W(o,r,i,a,u,"next",e)}function u(e){W(o,r,i,a,u,"throw",e)}a(void 0)}))})())}),[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"itemcontent-".concat(t.id),dangerouslySetInnerHTML:{__html:a},className:"downloadable"}),!s&&(0,r.jsx)("div",{children:(0,r.jsx)(V,{})})]})}function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){H(e,n,t[n])}))}return e}function $(e){var n=e.inView,o=e.open,a=e.setOpen,u=(0,i.useRef)(),s=(0,i.useState)({}),l=s[0],f=s[1],d=(0,i.useState)(!0),p=d[0],h=d[1];return(0,B.y1)("esc",(function(){n&&o&&u.current&&a(!1)}),[n,o,u]),(0,i.useEffect)((function(){if(o)f({});else if(p)f({maxHeight:"".concat(180,"px")}),h(!1);else if(u.current){var e=t.g.innerHeight-u.current.getBoundingClientRect().y-100;if(e<180)e=180;else if(e>u.current.getBoundingClientRect().bottom-u.current.getBoundingClientRect().top)return f({});f({height:"".concat(e,"px")})}else console.log(u)}),[o,u]),(0,r.jsx)(c.Z,{onClick:function(){!o&&a(!0)},sx:J({overflow:"hidden","&:hover":{cursor:"".concat(o?"inherit":"pointer")}},l),className:"test",ref:u,children:(0,r.jsx)(G,J({readableContent:u.current},e))})}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(u)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return X(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){var n=e.item,t=e.updateMenu,o=e.scrollDirection,a=Y(i.useState(!1),2),u=a[0],c=a[1],s=Y(i.useState(!1),2),l=s[0],f=s[1],p=function(){var e;null!==(e=(z=n).status)&&void 0!==e||(z.status="unread"),n.status="unread"===n.status?"read":"unread",f("unread"!==n.status),t(n)},h=(0,L.YD)(),m=h.ref,x=h.inView,v=function(e){var n=i.useRef(!1);return i.useEffect((function(){n.current=e})),n.current}(x);return i.useEffect((function(){!x&&v&&"unread"===n.status&&"down"==o&&p()}),[x]),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(F.Z,{sx:{borderBottom:"none"},children:[(0,r.jsx)(R.Z,{sx:{padding:0,borderBottom:"none"},children:(0,r.jsx)(d.Z,{"aria-label":"expand row",size:"small",onClick:function(){return c(!u)},children:u?(0,r.jsx)(N.Z,{}):(0,r.jsx)(M.Z,{})})}),(0,r.jsx)(R.Z,{sx:{padding:0,borderBottom:"none"},children:(0,r.jsx)(d.Z,{onClick:p,children:l?(0,r.jsx)(T.Z,{}):(0,r.jsx)(C.Z,{})})}),(0,r.jsx)(R.Z,{component:"th",scope:"row",sx:{padding:0,borderBottom:"none"},children:(0,r.jsx)("h2",{style:{marginBlockStart:"0.5rem",marginBlockEnd:0},ref:m,children:(0,r.jsx)("a",{target:"_blank",href:n.url,rel:"noreferrer",children:n.title})})})]}),(0,r.jsx)(F.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,r.jsx)(R.Z,{colSpan:3,children:(0,r.jsx)($,{open:u,setOpen:c,inView:x,wasInView:v,item:n})})})]})}function K(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Q(e,n,t,r,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(u)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return K(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return K(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e){var n=e.currentFeed,o=e.setErrorMessage,a=e.updateMenu,u=ee(i.useState([]),2),c=u[0],s=u[1],l=ee(i.useState(0),2),f=l[0],d=l[1],p=ee(i.useState(""),2),h=p[0],m=p[1];return i.useEffect((function(){var e=function(){var e=window.pageYOffset||document.documentElement.scrollTop;m(e>f?"down":"up"),d(e)};return t.g.addEventListener("scroll",e),function(){t.g.removeEventListener("scroll",e)}}),[f]),i.useEffect((function(){var e=parseInt(localStorage.getItem("fetch_limit")||"100"),t=function(){var t,r=(t=v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.t0=s,t.next=4,j("".concat(n.fetch_url+(n.fetch_url.includes("?")?"&":"?"),"limit=").concat(e,"&order=published_at&direction=").concat("desc").concat("&status=unread"),o);case 4:t.t1=t.sent.entries,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Q(o,r,i,a,u,"next",e)}function u(e){Q(o,r,i,a,u,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}),[n]),(0,r.jsx)(P.Z,{children:(0,r.jsx)(A.Z,{children:c.map((function(e){return(0,r.jsx)(q,{item:e,updateMenu:a,scrollDirection:h},e.id)}))})})}var te=t(5111),re=t(1596),ie=t(4),oe=t(4707),ae=t(8456),ue=t(4721),ce=t(6409),se=t(3965),le=t(5861),fe=t(6010);function de(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var pe=i.forwardRef((function(e,n){var t,i=e.classes,o=e.nodeId,a=e.icon,u=e.expansionIcon,s=e.displayIcon,l=e.onPick,f=e.node,d=e.leftMenuShrinked,p=(0,ce.Z)(o),h=p.disabled,m=p.expanded,x=p.selected,v=p.focused,g=p.handleExpansion,y=p.preventSelection,b=a||u||s;return(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",cursor:f.unreads>0?"pointer":""},title:f.title,className:(0,fe.Z)(i.root,(t={},de(t,i.expanded,m),de(t,i.selected,x),de(t,i.focused,v),de(t,i.disabled,h),t)),onMouseDown:y,ref:n,children:[(0,r.jsx)(c.Z,{component:"span",onClick:g,color:"inherit",sx:{mr:1},children:b}),(0,r.jsxs)(c.Z,{component:"span",onClick:f.is_feed?function(){return l(+o)}:g,sx:{fontWeight:"inherit",flexGrow:1,display:"flex",alignItems:"center"},children:[f.icon_data?(0,r.jsx)(se.Z,{sx:{width:"18px",height:"18px",display:"inline-block",mr:1},component:"img",src:f.icon_data}):(0,r.jsx)(ue.Z,{}),!d&&(0,r.jsx)(le.Z,{component:"span",variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:f.title}),(0,r.jsx)(le.Z,{variant:"caption",color:"inherit",sx:{float:"right",mr:1},children:f.unreads})]})]})}));function he(e){var n=e.setCurrentFeed,t=e.feeds,i=e.leftMenuShrinked,o=(0,m.useRouter)(),a=function(e){return(0,r.jsx)(ie.Z,{nodeId:e.is_feed?"".concat(e.id):"category-".concat(e.id),ContentComponent:pe,ContentProps:{onPick:function(e){isNaN(e)||(n(t.filter((function(n){return n.is_feed&&n.id==e})).slice(-1).pop()),o.push("#feed/".concat(e)))},node:e,leftMenuShrinked:i},children:Array.isArray(e.children)?e.children.map((function(e){return a(e)})):null},e.is_feed?"".concat(e.id):"category-".concat(e.id))};return(0,r.jsx)(r.Fragment,{children:t.length?(0,r.jsx)(oe.Z,{"aria-label":"gmail",defaultExpanded:["3"],defaultCollapseIcon:(0,r.jsx)(te.Z,{}),defaultExpandIcon:(0,r.jsx)(re.Z,{}),defaultEndIcon:(0,r.jsx)("div",{style:{width:24}}),sx:{flexGrow:1,overflowY:"auto"},children:t.filter((function(e){return e.children})).map((function(e){return a(e)}))}):(0,r.jsx)(ae.Z,{sx:{margin:"auto"}})})}var me=t(3540),xe=t(1494);function ve(e){var n=e.currentFeed,t=e.left,i=(0,xe.Z)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{display:"flex",flexGrow:1,sx:{position:"relative",left:t},children:(0,r.jsx)(le.Z,{variant:"h6",noWrap:!0,component:"div",children:n&&n.title})}),(0,r.jsx)(d.Z,{color:"inherit","aria-label":"Logout",edge:"start",onClick:function(){return i.logout()},sx:{ml:2},children:(0,r.jsx)(me.Z,{})})]})}function ge(){var e=(0,m.useRouter)();return(0,i.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}function ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(u)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ye(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e){var n=function(){M(!C)},x=function(){P(t.g.innerWidth<=768)},g=300,y=130,b=e.window,_=be(i.useState(t.g.innerWidth<=768),2),k=_[0],P=_[1],A=be(i.useState(!0),2),C=A[0],M=A[1],N=be(i.useState(""),2),T=N[0],R=N[1],F=be(function(e){var n=(0,i.useState)([]),t=n[0],r=n[1];return(0,i.useEffect)((function(){var n=function(){var n=Z(v().mark((function n(){var t,i,o,a,u,c,s,l,f;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=JSON.parse(localStorage.getItem("favicons")||"{}"),n.next=3,j("feeds",e);case 3:return i=n.sent,o=[],i.forEach((function(e){e.category&&!o.find((function(n){return e.category&&n.id===e.category.id}))&&o.push(e.category)})),a=[{id:-1,title:"All",fetch_url:"entries",unreads:0,children:[]},{id:-2,title:"Starred",fetch_url:"entries?starred=true",unreads:0,children:[]}],o.filter((function(e){return e})).sort((function(e,n){return e.title.localeCompare(n.title)})).forEach((function(e){var n;a.push(e),(n=a).push.apply(n,O(i.filter((function(n){return n.category&&n.category.id===e.id})).sort((function(e,n){return e.title.localeCompare(n.title)})).map((function(e){return Object.assign(e,{fetch_url:"feeds/"+e.id+"/entries",is_feed:!0})}))))})),a.forEach(function(){var n=Z(v().mark((function n(r){var i;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.icon_data=S(r.title),!r.icon||!(r.id in t)){n.next=5;break}r.icon_data=t[r.id],n.next=16;break;case 5:if(!r.icon){n.next=16;break}return n.prev=6,n.next=9,j("feeds/"+r.id+"/icon",e);case 9:i=n.sent,r.icon_data="data:"+i.data,n.next=15;break;case 13:n.prev=13,n.t0=n.catch(6);case 15:localStorage.setItem("favicons",JSON.stringify(I({},JSON.parse(localStorage.getItem("favicons")||"{}"),E({},r.id,r.icon_data))));case 16:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e){return n.apply(this,arguments)}}()),u=function(){var n=Z(v().mark((function n(t){var r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.fetch_url){n.next=2;break}return n.abrupt("return",0);case 2:return n.next=4,j(t.fetch_url+(t.fetch_url.includes("?")?"&":"?")+"status=unread&limit=1",e);case 4:return r=n.sent,t.unreads=r.total,n.abrupt("return",r.total);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.next=12,j("feeds/counters",(function(){})).catch(Z(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.slice();case 1:if(!n.length){e.next=6;break}return e.next=4,Promise.all(n.splice(-10).map(u));case 4:e.next=1;break;case 6:return e.abrupt("return",{unreads:a.reduce((function(e,n){return e[n.id]=n.unreads,e}),{})});case 7:case"end":return e.stop()}}),e)}))));case 12:if((c=n.sent.unreads)[-1]=null!==(s=c[-1])&&void 0!==s?s:Object.values(c).reduce((function(e,n){return e+n}),0),!(l=a.find((function(e){return-2===e.id})))){n.next=26;break}if(null===(f=c[-2])||void 0===f){n.next=22;break}n.t0=f,n.next=25;break;case 22:return n.next=24,u(l);case 24:n.t0=n.sent;case 25:c[-2]=n.t0;case 26:a.map((function(e){return parseInt(e)&&(e=a.find((function(n){return n.id===e&&n.fetch_url}))),e})).filter((function(e){return e.fetch_url})).map((function(e){return e.unreads=c[e.id]||0})),o.forEach((function(e){e.id>1&&(e.children=a.filter((function(n){return n.fetch_url&&n.category&&n.category.id===e.id})),e.unreads=a.filter((function(n){return n.fetch_url&&n.category&&n.category.id===e.id})).reduce((function(e,n){return e+n.unreads}),0))})),r(a);case 29:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Z(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})))()}),[]),[t,r]}(R),2),L=F[0],B=F[1],D=be(i.useState(),2),z=D[0],U=D[1],V=(0,m.useRouter)();i.useEffect((function(){var e=V.asPath.match(/#feed\/([0-9]+)/);e&&(U(L.filter((function(n){return!0===n.is_feed&&n.id==+e[1]})).slice(-1).pop()),M(!1))}),[L,V]),i.useEffect((function(){return t.g.addEventListener("resize",x),function(){t.g.removeEventListener("resize",x)}}),[]);var W=void 0!==b?function(){return b().document.body}:void 0;return(0,r.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,r.jsx)(s.ZP,{}),(0,r.jsx)(u.Z,{position:"fixed",children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(d.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:n,sx:{mr:2,left:C?g:k?0:y},children:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(ve,{currentFeed:z,left:C?g:k?0:y})]})}),(0,r.jsx)(c.Z,{component:"nav",sx:{width:C?g:y,flexShrink:{sm:0}},"aria-label":"mailbox folders",children:(0,r.jsxs)(f.ZP,{container:W,variant:k?"temporary":"permanent",open:C,onClose:n,ModalProps:{keepMounted:!0},sx:{display:{xs:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:C?g:y}},children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)(l.Z,{}),(0,r.jsx)(he,{setCurrentFeed:function(e){M(!1),U(e)},leftMenuShrinked:!k&&!C,feeds:L})]})}),(0,r.jsxs)(c.Z,{component:"main",sx:{position:"absolute",top:0,left:C?g:k?0:y},children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)(ge,{}),z&&(0,r.jsx)(ne,{currentFeed:z,updateMenu:function(e){!function(e,n,t){w.apply(this,arguments)}([e],e.status,R);var n="unread"===e.status||void 0===e.status?1:-1,t=L.map((function(e){return z&&(z.id==e.id||z.category&&z.category.id==e.id)&&(e.unreads+=n),e}));B(t)},setErrorMessage:R}),T&&(0,r.jsx)(p.Z,{open:""!=T,autoHideDuration:4e3,onClose:function(){return R("")},children:(0,r.jsx)(a.Z,{severity:"error",children:T})})]})]})}var we=function(){var e=(0,xe.Z)();return(0,i.useEffect)((function(){e.isLogged()||e.redirectLogin()}),[e]),(0,r.jsxs)(r.Fragment,{children:["user.isLogged() && (",(0,r.jsx)(je,{}),")"]})}},1494:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(1163),i=t(7294);function o(){var e=(0,r.useRouter)();return(0,i.useState)({isLogged:function(){return null!=localStorage.getItem("miniflux_server")&&null!=localStorage.getItem("miniflux_api_key")},redirectLogin:function(){e.push("/login")},login:function(n,t){null!=n&&null!=t&&(localStorage.setItem("miniflux_server",n),localStorage.setItem("miniflux_api_key",t),e.push("/"))},logout:function(){localStorage.removeItem("miniflux_server"),localStorage.removeItem("miniflux_api_key"),e.reload()},getEmail:function(){return localStorage.getItem("miniflux_server")||""}})[0]}}},function(e){e.O(0,[813,473,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);